



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="ASIR 1">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../Imagenes/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Proyecto Celulosa - TipsTaBet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#proyecto-celulosa" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="TipsTaBet" class="md-header-nav__button md-logo">
          
            <i class="md-icon">devices_other</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              TipsTaBet
            </span>
            <span class="md-header-nav__topic">
              
                Proyecto Celulosa
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/tzinm/Tipstabet/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    tzinm/tipstabet
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../Fichas-tecnicas/" title="Hardware" class="md-tabs__link md-tabs__link--active">
          Hardware
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Sistemas-Operativos/Comandos-de-Administracion/" title="Sistemas Operativos" class="md-tabs__link">
          Sistemas Operativos
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Planificacion-Administracion-de-Redes/Red/" title="Administración de redes" class="md-tabs__link">
          Administración de redes
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Lenguaje-de-Marcas/Tipstabet/" title="Lenguaje de Marcas" class="md-tabs__link">
          Lenguaje de Marcas
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Herramientas/Easy2boot/" title="Contenido extra" class="md-tabs__link">
          Contenido extra
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../Incidencias/30-04-2019/" title="Incidencias" class="md-tabs__link">
          Incidencias
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="TipsTaBet" class="md-nav__button md-logo">
      
        <i class="md-icon">devices_other</i>
      
    </a>
    TipsTaBet
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/tzinm/Tipstabet/" title="Ir al repositorio" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    tzinm/tipstabet
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Hardware
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Hardware
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Fichas-tecnicas/" title="Fichas técnicas" class="md-nav__link">
      Fichas técnicas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rockstor/" title="Rockstor" class="md-nav__link">
      Rockstor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Raspberry-Pi/" title="Raspberry Pi" class="md-nav__link">
      Raspberry Pi
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Servidor/" title="Presupuesto Servidor" class="md-nav__link">
      Presupuesto Servidor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Log/" title="Control de acceso" class="md-nav__link">
      Control de acceso
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Proyecto Celulosa
      </label>
    
    <a href="./" title="Proyecto Celulosa" class="md-nav__link md-nav__link--active">
      Proyecto Celulosa
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hardware" title="Hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puesta-en-marcha" title="Puesta en marcha" class="md-nav__link">
    Puesta en marcha
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx" title="Nginx" class="md-nav__link">
    Nginx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nfs-service" title="NFS Service" class="md-nav__link">
    NFS Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts" title="Scripts" class="md-nav__link">
    Scripts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" title="Cron" class="md-nav__link">
    Cron
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resultado-final" title="Resultado final" class="md-nav__link">
    Resultado final
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enlaces-de-interes" title="Enlaces de interés" class="md-nav__link">
    Enlaces de interés
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Sistemas Operativos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Sistemas Operativos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Sistemas-Operativos/Comandos-de-Administracion/" title="Comandos de Administración" class="md-nav__link">
      Comandos de Administración
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Sistemas-Operativos/Equipos-Clientes/Punto-de-Restauracion/" title="Punto de restauración" class="md-nav__link">
      Punto de restauración
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Sistemas-Operativos/Equipos-Clientes/Imagenes-del-Sistema/" title="Imagen del Sistema" class="md-nav__link">
      Imagen del Sistema
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Sistemas-Operativos/Equipos-Clientes/Acceso-Remoto/" title="Acceso Remoto" class="md-nav__link">
      Acceso Remoto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Sistemas-Operativos/Equipos-Clientes/Dominio-linux/" title="Unir Linux a Windows Server" class="md-nav__link">
      Unir Linux a Windows Server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Administración de redes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Administración de redes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Planificacion-Administracion-de-Redes/Red/" title="Planificación de la red" class="md-nav__link">
      Planificación de la red
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Lenguaje de Marcas
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Lenguaje de Marcas
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Lenguaje-de-Marcas/Tipstabet/" title="Servidor Web" class="md-nav__link">
      Servidor Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Lenguaje-de-Marcas/MkDocs/" title="MkDocs" class="md-nav__link">
      MkDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Lenguaje-de-Marcas/Markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Contenido extra
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Contenido extra
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Herramientas/Easy2boot/" title="Easy2boot" class="md-nav__link">
      Easy2boot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Herramientas/Rclone/" title="Rclone" class="md-nav__link">
      Rclone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Herramientas/Github/" title="GitHub Deployment" class="md-nav__link">
      GitHub Deployment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Incidencias
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Incidencias
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Incidencias/30-04-2019/" title="Restaurar contraseña WS" class="md-nav__link">
      Restaurar contraseña WS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hardware" title="Hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puesta-en-marcha" title="Puesta en marcha" class="md-nav__link">
    Puesta en marcha
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nginx" title="Nginx" class="md-nav__link">
    Nginx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nfs-service" title="NFS Service" class="md-nav__link">
    NFS Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripts" title="Scripts" class="md-nav__link">
    Scripts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" title="Cron" class="md-nav__link">
    Cron
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resultado-final" title="Resultado final" class="md-nav__link">
    Resultado final
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enlaces-de-interes" title="Enlaces de interés" class="md-nav__link">
    Enlaces de interés
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/tzinm/Tipstabet/edit/master/docs/Hardware/Proyecto-Celulosa.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="proyecto-celulosa">Proyecto Celulosa<a class="headerlink" href="#proyecto-celulosa" title="Permanent link">#</a></h1>
<p>En el laboratorio del centro se pretende grabar la evolución de una bacteria relacionada con la Celulosa. Para ello el grupo de sistemas (Administración de Sistemas Informáticos en red) configurará una Raspberry pi con una cámara conectada para que tome dos fotos por minuto . El vaso que contiene la bacteria y la cámara se introducirán en un horno a una temperatura de 30ºC.</p>
<h2 id="hardware">Hardware<a class="headerlink" href="#hardware" title="Permanent link">#</a></h2>
<p>En este apartado vamos a dejar una tabla para exponer brevemente cual ha sido el material utilizado para llevar a cabo este proyecto.</p>
<table>
<thead>
<tr>
<th align="center">Producto</th>
<th align="center">Precio</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Rasbperry pi 3b+</td>
<td align="center"><a href="https://www.pccomponentes.com/raspberry-pi-3-modelo-b">37,50€</a></td>
</tr>
<tr>
<td align="center">Tarjeta MicroSD</td>
<td align="center"><a href="https://www.pccomponentes.com/toshiba-exceria-m302-ea-16gb-uhs-i-clase-10-adaptador">11,14€</a></td>
</tr>
<tr>
<td align="center">Fuente de alimentación</td>
<td align="center"><a href="https://www.pccomponentes.com/fuente-de-alimentacion-para-raspberry-pi-3-51v-1-salida-25a-13w-negra">9,39€</a></td>
</tr>
<tr>
<td align="center">Cámara 5 megapíxeles</td>
<td align="center"><a href="https://www.amazon.es/Kuman-M%C3%B3dulo-Raspberry-Montajes-ajustables/dp/B06XNMMTTP/ref=sr_1_9?keywords=camara+raspberry+pi+3&amp;qid=1557413206&amp;s=gateway&amp;sr=8-9">16,99€</a></td>
</tr>
<tr>
<td align="center"><strong>TOTAL</strong></td>
<td align="center"><strong>75,02€</strong></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Los precios de la tabla han sido consultados a fecha 09/05/2019.</p>
</div>
<h2 id="puesta-en-marcha">Puesta en marcha<a class="headerlink" href="#puesta-en-marcha" title="Permanent link">#</a></h2>
<p>Para el proyecto hemos utilizado como Sistema Operativo <strong>CentOS minimal</strong> que podemos descargarnos desde este <a href="http://isoredirect.centos.org/altarch/7/isos/armhfp/">enlace</a>. Por el momento únicamente tenemos disponible la versión de 32 bits, que será con la que trabajaremos en este proyecto. </p>
<p>Puesto que la Raspberry pi 3b+ es un dispositivo utilizado en diferentes partes del proyecto, hay <a href="../Raspberry-Pi/">otro apartado</a> en el que se explican las primeras configuraciones necesarias para su correcto funcionamiento. </p>
<p>Los pasos que se exponen a continuación hacen referencia a este proyecto en particular, que será la puesta en marcha del <strong>servidor</strong> y <strong>cliente NFS</strong>, los <strong>scripts</strong> que hemos creado y la configuración de <strong>Cron</strong>.</p>
<h3 id="nginx">Nginx<a class="headerlink" href="#nginx" title="Permanent link">#</a></h3>
<p>Partimos de tener el servidor nginx instalado en nuestro sistema. Como pretendemos que las fotografías sean accesibles desde un navegador, en servidores nginx se debe hacer una modificación en el fichero <code>nginx.conf</code> que se encuentra en <code>/etc/nginx/nginx.conf</code> para que indexe el contenido. Además debemos ajustar la hora para que se ajuste a la hora local de la máquina.</p>
<p>Debemos añadir los siguiente:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">#El directorio Fotos será el que contendrá todas las fotografías que va capturan la raspberry. Hay que tener en cuenta que este directorio debe encontrarse en &quot;&quot;/usr/share/nginx/html/&quot;.</span>
location /Fotos <span class="o">{</span>
    autoindex on<span class="p">;</span>
    autoindex_localtime on<span class="p">;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Fuente: <a href="https://www.linuxito.com/gnu-linux/nivel-basico/1140-como-habilitar-el-listado-de-directorios-en-nginx">Linuxito.com</a></p>
<h3 id="nfs-service">NFS Service<a class="headerlink" href="#nfs-service" title="Permanent link">#</a></h3>
<p>Haremos uso del NAS Rockstor como almacenamiento de las fotografías que se publicarán. Necesitamos almacenamiento externo puesto que obtendremos una fotografía cada treinta segundos, y el almacenamiento interno de la Raspberry pi (Tarjeta MicroSD de 16GB) no tiene capacidad suficiente para guardar las fotografías que vayamos a sacar durante los cuatro días que dura el proyecto.</p>
<p>Para acceder a este recurso de red utilizaremos el servicio <strong>NFS</strong>. En primer lugar al igual que hemos hecho en otras <a href="../Rockstor/">ocasiones</a> para compartir recursos en samba, debemos crear un directorio compartido o <strong>Share</strong> (así lo denomina Rockstor).</p>
<p>Este recurso compartido que hemos creado, para que sea accesible desde nuestra Raspberry debemos modificar los permisos y otorgar lectura, escritura y ejecución a todos los usuarios.</p>
<p><img alt="Directorio Raspberry" src="../../Imagenes/Celulosa/Directorio_raspberry.png" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Estamos en un proyecto en una red local en la que no tenemos en cuenta la exposición del servidor NFS. Para más información sobre la seguridad en servidores NFS consultar el siguiente <a href="https://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-rg-es-4/s1-nfs-security.html">enlace</a>.</p>
</div>
<p>Una vez que hemos creado un recurso para compartir, necesitamos habilitar el servicio NFS, encontraremos este servicio en <em>File Sharing</em> dentro de <em>Storage</em>.</p>
<p>La configuración debe de quedar del siguiente modo:</p>
<p><img alt="Servicio NFS" src="../../Imagenes/Celulosa/NFS_servicio.png" /></p>
<p>Ya tenemos configudo el servidor NFS en nuestro NAS Rockstor, por lo tanto pasamos a configurar el cliente en nuestra Raspberry pi. </p>
<p>En primer lugar debemos instalar los paquetes necesario para que el cliente funcione correctamente. Los paquetes a instalar son:</p>
<ol>
<li>
<p>nfs-common</p>
</li>
<li>
<p>portmap <em>(para la versión 4 de NFS no es necesario instalar este paquete, más información <a href="http://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-sg-es-4/s1-server-port.html">aquí</a>)</em></p>
</li>
</ol>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>yum install nfs-common portmap
</pre></div>
</td></tr></table>

<p>Una vez que tenemos el cliente instalado procedemos a describir los pasos necesarios para montar el recurso en nuestra Rpi.</p>
<ul>
<li>Comprobar que recursos se encuentran disponibles con el comando <code>showmount</code>:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>showmount -e <span class="m">172</span>.16.43.226
</pre></div>
</td></tr></table>

<ul>
<li>Montaje del recurso en la ruta que corresponde. En nuestro hemos montado el recurso en el directorio que utiliza nginx para almacenar el contenido que sirve, es decir en el directorio <code>/usr/share/nginx/html</code>:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>mount -t nfs ip_del_servidor:/ruta_recurso_compartido /ruta_montaje
</pre></div>
</td></tr></table>

<ul>
<li>Para terminar, configuraremos el recurso para que sea montado al inicio del sistema. Para ello es necesario configurar el fichero <code>/etc/fstab</code>:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="m">172</span>.16.90.230:/export/Raspberry /usr/share/nginx/html nfs defaults <span class="m">0</span> <span class="m">0</span>
</pre></div>
</td></tr></table>

<p>​       Los parámetros descritos en el fichero <strong>fstab</strong> son los siguientes:</p>
<ul>
<li><strong>Defaults</strong>: asigna las opciones de montaje predeterminadas. Estas opciones son: <code>rw</code>, <code>suid</code>, <code>dev</code>, <code>exec</code>, <code>auto</code>, <code>nouser</code>y <code>async</code>.</li>
<li><strong>Dump</strong>: indica si es necesario realizar una copia de seguirdad del sistema de ficheros. Puesto que no tenemos dump instalado en nuestro sistema debemos establecer 0.</li>
<li><strong>Pass</strong>: utilizado por <a href="https://wiki.archlinux.org/index.php/Fsck">fsck</a> para decidir el orden de comprobación de los sistemas de ficheros. No queremos que realice ninguna comprobación por lo que le indicamos 0.</li>
</ul>
<p>Fuente: <a href="https://wiki.archlinux.org/index.php/Fstab">Wiki Archlinux</a></p>
<h2 id="scripts">Scripts<a class="headerlink" href="#scripts" title="Permanent link">#</a></h2>
<p>En este apartado explicaremos los scripts que se han realizado para diferentes trabajos que queremos que realice la Raspberry.</p>
<ul>
<li>Este primer script tomará una fotografía cada <strong>30 segundos</strong>. Utilizaremos cron para que ejecute dicho script cada minuto, por lo tanto obtendremos fotografías cada 30 segundos.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#Establecemos el nombre que daremos al documento.</span>
<span class="nv">FECHA</span><span class="o">=</span><span class="k">$(</span>date <span class="p">|</span> tr -s <span class="s1">&#39; &#39;</span> <span class="s1">&#39;-&#39;</span> <span class="p">|</span> cut -d <span class="s1">&#39;-&#39;</span> -f <span class="m">1</span>-4<span class="k">)</span>

<span class="c1">#Ejecutamos el comando para tomar la fotografía.</span>
raspistill -o /usr/share/nginx/html/Fotos/<span class="nv">$FECHA</span>.jpg

<span class="c1">#Pausamos el script durante 30 segundos.</span>
sleep 30s

<span class="c1">#Volvemos a generar la variable, si no tomaría el mismo nombre que el fichero anterior.</span>
<span class="nv">FECHA</span><span class="o">=</span><span class="k">$(</span>date <span class="p">|</span> tr -s <span class="s1">&#39; &#39;</span> <span class="s1">&#39;-&#39;</span> <span class="p">|</span> cut -d <span class="s1">&#39;-&#39;</span> -f <span class="m">1</span>-4<span class="k">)</span>

<span class="c1">#Ejecutamos de nuevo el comando para tomar la fotografía.</span>
raspistill -o /usr/share/nginx/html/Fotos/<span class="nv">$FECHA</span>.jpg
</pre></div>
</td></tr></table>

<ul>
<li>En este segundo script lo que pretendemos es almacenar las fotografías que se realizan durante una hora en un directorio. </li>
</ul>
<p>Este directorio tomará como nombre la fecha y hora de las fotografías que se realicen durante una hora completa. Es decir las fotografías que se realicen entre las 17:00 y las 18:00 se almacenarán en un directorio con el nombre Wed-May-8-17:00/.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">for</span> i in /usr/share/nginx/html/Fotos/*.jpg
<span class="k">do</span>
    <span class="nv">DIRECTORY</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$i</span> <span class="p">|</span> tr -s <span class="s1">&#39;:&#39;</span> <span class="s1">&#39;-&#39;</span> <span class="p">|</span> cut -d <span class="s1">&#39;-&#39;</span> -f <span class="m">1</span>-4<span class="k">)</span><span class="se">\:</span><span class="m">00</span>

    <span class="k">if</span> <span class="o">[</span> ! -d /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
        mkdir /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span>
        mv <span class="nv">$i</span> /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span>/
    <span class="k">else</span>
        mv <span class="nv">$i</span> /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span>/
    <span class="k">fi</span>
<span class="k">done</span>
</pre></div>
</td></tr></table>

<ul>
<li>Por último, este script tiene una función similar al anterior. Lo que pretendemos es que todos los directorios que se hayan creado durante un día se almacenen en otro que llevará como nombre la fecha (sin hora). </li>
</ul>
<p>Siguiendo con el ejemplo del script anterior, todos los directorios que se hubiesen creado durante ese día se almacenaría en otro con el nombre Wed-May-8.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">for</span> i in /usr/share/nginx/html/Fotos/*00
<span class="k">do</span>
    <span class="nv">DIRECTORY</span><span class="o">=</span><span class="k">$(</span>basename <span class="nv">$i</span> <span class="p">|</span> tr -s <span class="s1">&#39;:&#39;</span> <span class="s1">&#39;-&#39;</span> <span class="p">|</span> cut -d <span class="s1">&#39;-&#39;</span> -f <span class="m">1</span>-3<span class="k">)</span>

    <span class="k">if</span> <span class="o">[</span> ! -d /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
        mkdir /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span>
        mv <span class="nv">$i</span> /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span>/
    <span class="k">else</span>
        mv <span class="nv">$i</span> /usr/share/nginx/html/Fotos/<span class="nv">$DIRECTORY</span>
    <span class="k">fi</span>
<span class="k">done</span>
</pre></div>
</td></tr></table>

<h2 id="cron">Cron<a class="headerlink" href="#cron" title="Permanent link">#</a></h2>
<p>Para que los <strong>scripts</strong> que hemos creado en el apartado anterior se ejecuten automáticamente en el horario que nosotros decidamos es necesario hacer uso de el servicio <strong>cron</strong>. Su uso es muy sencillo, únicamente es necesario conocer la sintaxis, que podemos consultarla en el fichero <code>/etc/crontab</code>.</p>
<p><img alt="Sintaxis Cron" src="../../Imagenes/Celulosa/Crontab_sintaxis.png" /></p>
<p>Para modificar el fichero que lee el servicio cron debemos ejecutar <code>crontab -e</code>, el cual abrirá el editor de texto <strong>vi</strong> para insertar las líneas que deseemos. En nuestro caso insertaremos tres líneas, una por cada script que deseamos ejecutar.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1">#Ejecución cada minuto</span>
*/1 * * * * /root/fotos.sh
<span class="c1">#Ejecución una vez cada hora</span>
@hourly /root/mover.sh
<span class="c1">#Ejecución una vez al día</span>
@daily /root/moverdirectorios.sh
</pre></div>
</td></tr></table>

<p>En la siguiente tabla extraída de la  <a href="https://help.ubuntu.com/community/CronHowto">wiki</a> de Ubuntu podemos ver otra forma de sintaxis más reducida.</p>
<table>
<thead>
<tr>
<th><strong>Cadena</strong></th>
<th><strong>Significado</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>@reboot</td>
<td>Se ejecuta una vez, al inicio del sistema.</td>
</tr>
<tr>
<td>@yearly</td>
<td>Se ejecuta una vez al año "0 0 1 1 *"</td>
</tr>
<tr>
<td>@annually</td>
<td>Igual que @yearly.</td>
</tr>
<tr>
<td>@monthly</td>
<td>Se ejecuta una vez al mes "0 0 1 * *".</td>
</tr>
<tr>
<td>@weekly</td>
<td>Se ejecuta una vez por semana "0 0 * * 0".</td>
</tr>
<tr>
<td>@daily</td>
<td>Se ejecuta una vez al día "0 0 * <em> </em>".</td>
</tr>
<tr>
<td>@midnight</td>
<td>Igual que @daily.</td>
</tr>
<tr>
<td>@hourly</td>
<td>Se ejecuta una vez por hora "0 * <em> * </em>".</td>
</tr>
</tbody>
</table>
<h2 id="resultado-final">Resultado final<a class="headerlink" href="#resultado-final" title="Permanent link">#</a></h2>
<p>El <strong>resultado final</strong> es el siguiente:</p>
<p><img alt="Fotografías indexadas" src="../../Imagenes/Celulosa/Prueba_final.png" /></p>
<p><img alt="Celulosa" src="../../Imagenes/Celulosa/Celulosa.png" /></p>
<h2 id="enlaces-de-interes">Enlaces de interés<a class="headerlink" href="#enlaces-de-interes" title="Permanent link">#</a></h2>
<p><a href="https://www.tecmint.com/how-to-setup-nfs-server-in-linux/">How to Setup NFS</a></p>
<p><a href="https://www.raspberrypi.org/documentation/usage/camera/raspicam/raspistill.md">Raspistill</a></p>
<hr />
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Log/" title="Control de acceso" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Control de acceso
              </span>
            </div>
          </a>
        
        
          <a href="../../Sistemas-Operativos/Comandos-de-Administracion/" title="Comandos de Administración" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                Comandos de Administración
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 ASIR 1
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/tzinm" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/tzinm1" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>